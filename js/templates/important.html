<svg class="doc" version="2.0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="420px" height="600px" viewBox="0 0 420 600" enable-background="new 0 0 420 600" xml:space="preserve">

<% fillImageTo(420,600) %>

<defs>
    <pattern id="image_pattern" patternUnits="userSpaceOnUse" x="0" y="0"  width="420" height="600">
        <image xlink:href="<%= image.url %>" x="<%= image.d.x %>" y="<%= image.d.y %>" width="<%= image.d.width %>" height="<%= image.d.height %>" />
    </pattern>

    <text id="titlePattern" text-anchor="middle" font-size="60">
        <% var t1 =get('title1').trim().split("");
        for(var i=0; i< t1.length; i+=2){ var b = i+1==t1.length ? '':t1[i+1] %>
        <tspan x="0" y="<%= i*50-50*t1.length/2+300 %>" font-family="AuthenticStencilCom-Black"><%= String(t1[i]+b).toUpperCase() %></tspan>
        <% } %>
    </text>

           <polygon id="star" fill="#FFFFFF" stroke="#000000" stroke-width="2.5" points="-0.5,-36.901 5.104,-18.08 21.153,-32.024
	14.812,-13.368 37.009,-18.701 20.419,-5.21 42.813,-0.501 20.419,4.21 37.009,17.701 14.812,12.368 21.153,31.023 5.104,17.08
	-0.5,35.901 -6.104,17.08 -22.155,31.023 -15.812,12.368 -38.011,17.701 -21.42,4.21 -43.813,-0.501 -21.42,-5.21 -38.011,-18.701
	-15.812,-13.368 -22.155,-32.024 -6.104,-18.08 "/>

           <ellipse id="ovale" fill="#fff" stroke-width="2" stroke="#000" cx="0" cy="0" rx="100" ry="52"/>

            <rect id="rectangle" fill="#fff" stroke-width="3" stroke="#000" width="280" height="104" x="-140" y="-52"/>

 </defs>

<g id="image">
	<rect x="0" y="0" fill="url(#image_pattern)" width="420" height="600"/>
</g>

<g id="signe">

    <defs>

            <path id="warning" fill="#F9E928" d="M4.262-9.982l5.869,37.847h-21.263c0,0,0.206-1.33,0.542-3.492c0.056-0.361,0.114-0.744,0.241-1.114c-0.002-0.438,0.063-0.862,0.297-1.312c-0.096-0.438-0.022-0.898,0.052-1.377c1.705-10.998,4.735-30.55,4.735-30.55L4.262-9.982L4.262-9.982z M6.644-28.865v14.119H-7.559v-14.119H6.644z"/>

            <path id="flash" fill="none" stroke="#ffff00" stroke-width="1" stroke-miterlimit="10" d="M-0.819,270.859l-16.5-73.948l-28.504,67.188l-0.627-0.086l-3.654-77.035l-39.084,57.104l-0.603-0.177l9.404-76.278l-47.725,44.18l-0.549-0.266l22.026-71.695l-54.928,29.539l34.022-64.334l-58.493,12.623l43.963-52.672l-59.133-4.914l51.688-38.387l-56.829-22.203l56.828-22.199l-51.687-38.389l59.135-4.912l-43.961-52.674l58.492,12.625l-34.021-64.336l54.926,29.541l-22.027-71.697l0.549-0.266l47.725,44.182l-9.404-76.281l0.603-0.174l39.084,57.102l3.654-77.034l0.627-0.087l28.504,67.189l16.5-73.947h0.635l16.502,73.947l28.504-67.189l0.627,0.087l3.656,77.034l39.084-57.102l0.601,0.174l-9.404,76.281l47.727-44.182l0.55,0.266l-22.029,71.697l54.928-29.542l-34.021,64.337l58.491-12.625L141.07-66.002l59.134,4.912l-51.688,38.389l56.828,22.199l-56.828,22.203l51.689,38.387l-59.136,4.914l43.961,52.672l-58.491-12.623l34.021,64.334l-54.928-29.539l22.028,71.695l-0.549,0.266l-47.727-44.18l9.404,76.278l-0.601,0.177l-39.084-57.104l-3.655,77.035l-0.627,0.086l-28.505-67.188l-16.502,73.948H-0.819L-0.819,270.859z M-0.504,269.329l16.625-74.502l28.748,67.758l3.679-77.519l39.438,57.619l-9.451-76.666l48.166,44.586l-22.116-71.984l54.485,29.306l-33.686-63.705l58.076,12.535l-43.586-52.224l58.741-4.879L147.313,21.55l56.445-22.053l-56.445-22.051l51.303-38.104l-58.741-4.879l43.586-52.221l-58.076,12.533l33.686-63.703l-54.485,29.305l22.116-71.986l-48.168,44.588l9.453-76.668l-39.438,57.622l-3.679-77.52l-28.748,67.758l-16.625-74.5l-16.621,74.5l-28.745-67.758l-3.679,77.52l-39.438-57.621l9.451,76.668l-48.166-44.588l22.116,71.986l-54.487-29.305l33.688,63.703l-58.077-12.532l43.586,52.221l-58.743,4.881l51.305,38.102l-56.448,22.05l56.447,22.053l-51.306,38.104l58.744,4.879l-43.585,52.222l58.076-12.535l-33.688,63.703l54.487-29.306l-22.115,71.986l48.166-44.586l-9.451,76.666l39.438-57.621l3.679,77.521l28.745-67.758L-0.504,269.329L-0.504,269.329z"/>
            <path id="flash_red" fill="none" stroke="#ff0000" stroke-width="3" stroke-miterlimit="10" d="M-0.819,270.859l-16.5-73.948l-28.504,67.188l-0.627-0.086l-3.654-77.035l-39.084,57.104l-0.603-0.177l9.404-76.278l-47.725,44.18l-0.549-0.266l22.026-71.695l-54.928,29.539l34.022-64.334l-58.493,12.623l43.963-52.672l-59.133-4.914l51.688-38.387l-56.829-22.203l56.828-22.199l-51.687-38.389l59.135-4.912l-43.961-52.674l58.492,12.625l-34.021-64.336l54.926,29.541l-22.027-71.697l0.549-0.266l47.725,44.182l-9.404-76.281l0.603-0.174l39.084,57.102l3.654-77.034l0.627-0.087l28.504,67.189l16.5-73.947h0.635l16.502,73.947l28.504-67.189l0.627,0.087l3.656,77.034l39.084-57.102l0.601,0.174l-9.404,76.281l47.727-44.182l0.55,0.266l-22.029,71.697l54.928-29.542l-34.021,64.337l58.491-12.625L141.07-66.002l59.134,4.912l-51.688,38.389l56.828,22.199l-56.828,22.203l51.689,38.387l-59.136,4.914l43.961,52.672l-58.491-12.623l34.021,64.334l-54.928-29.539l22.028,71.695l-0.549,0.266l-47.727-44.18l9.404,76.278l-0.601,0.177l-39.084-57.104l-3.655,77.035l-0.627,0.086l-28.505-67.188l-16.502,73.948H-0.819L-0.819,270.859z M-0.504,269.329l16.625-74.502l28.748,67.758l3.679-77.519l39.438,57.619l-9.451-76.666l48.166,44.586l-22.116-71.984l54.485,29.306l-33.686-63.705l58.076,12.535l-43.586-52.224l58.741-4.879L147.313,21.55l56.445-22.053l-56.445-22.051l51.303-38.104l-58.741-4.879l43.586-52.221l-58.076,12.533l33.686-63.703l-54.485,29.305l22.116-71.986l-48.168,44.588l9.453-76.668l-39.438,57.622l-3.679-77.52l-28.748,67.758l-16.625-74.5l-16.621,74.5l-28.745-67.758l-3.679,77.52l-39.438-57.621l9.451,76.668l-48.166-44.588l22.116,71.986l-54.487-29.305l33.688,63.703l-58.077-12.532l43.586,52.221l-58.743,4.881l51.305,38.102l-56.448,22.05l56.447,22.053l-51.306,38.104l58.744,4.879l-43.585,52.222l58.076-12.535l-33.688,63.703l54.487-29.306l-22.115,71.986l48.166-44.586l-9.451,76.666l39.438-57.621l3.679,77.521l28.745-67.758L-0.504,269.329L-0.504,269.329z"/>

    </defs>

    <% var total = 20; for(var i=4; i<=total; i++){ var scale = 1.3*i/total %>
    <use xlink:href="#flash<%= (i==14 || i==18) ? '_red' :'' %>" transform="translate(210,300) scale(<%= scale %>)" />
    <% } %>

    <g id="warnings">
        <use xlink:href="#warning" transform="translate(20,40) scale(1,-1)"></use>
        <use xlink:href="#warning" transform="translate(400,40) scale(1,-1)"></use>
        <use xlink:href="#warning" transform="translate(20,560)"></use>
        <use xlink:href="#warning" transform="translate(400,560)"></use>
    </g>

</g>

<g id="comp-elements">

    <use xlink:href="#star" transform="translate(80,50)"></use>
    <use xlink:href="#star" transform="translate(125,96) scale(.5,.5)"></use>
    <use xlink:href="#star" transform="translate(330,470) scale(.8,.8)"></use>


    <g id="ovales" transform="translate(280,280)">
    <% var total = 60; s=.8; for(var i=10; i<=total; i++){
        var n = i/total,
            tours = 2*Math.PI,
            x = Math.sin(i/tours)*n*100,
            y = Math.cos(i/tours)*n*100,
            rotation = (45*n+90);
        %>
        <use xlink:href="#ovale" transform="translate(<%= x+','+y %>) scale(<%= n*n*s %>) rotate(<%= rotation %>)" />
        <% } %>
    </g>

    <g id="rectangles" transform="translate(150,300)">
    <% var total = 30; s=.8; for(var i=10; i<=total; i++){
        var n = i/total,
            tours = 1.5*Math.PI,
            x = Math.sin(i/tours)*n*100,
            y = Math.cos(i/tours)*n*220,
            rotation = (180*-n);
        %>
        <use xlink:href="#rectangle" transform="translate(<%= x+','+y %>) scale(<%= n*n*s %>) rotate(<%= rotation %>)" />
    <% } %>
    </g>

</g>



<g id="titles">

	<g id="title2">
		<text transform="translate(160 528)" text-anchor="middle" font-family="AuthenticStencilCom-Black" font-size="30">
            <tspan><%= get('title2') %></tspan>
        </text>
	</g>
	
	<g id="title1" transform="translate(210,100) ">
	    <use xlink:href="#titlePattern" fill="#ffffff" stroke="#000" stroke-width="2"></use>
	</g>

    <g id="date" transform="translate(270,140) rotate(45)">
        <text font-size="30" letter-spacing="3" font-family="AuthenticStencilCom-Black">
            <tspan x="0" y="0"><%= date("dd/") %><tspan>
            <tspan x="0" y="40"><%= date("mm/") %><tspan>
            <tspan x="0" y="80"><%= date("yy/") %><tspan>
        </text>
    </g>

</g>

</svg>
